{"version":3,"sources":["components/EditProfilePage.js"],"names":["EditProfilePage","props","state","username","email","handleChange","bind","handleUpdateButtonClicked","axios","get","DOMAIN_URL","then","response","status","setState","retrievedUsername","data","user_name","catch","error","console","log","loading","post","history","push","message","errorMessage","replace","e","target","name","value","React","Component"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEqBA,e;;;AACjB,6BAAYC,KAAZ,EAAmB;AAAA;;AAAA,sIACTA,KADS;;AAEf,cAAKC,KAAL,GAAa;AACTC,sBAAU,EADD;AAETC,mBAAO;AAFE,SAAb;AAIA,cAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,OAApB;AACA,cAAKC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BD,IAA/B,OAAjC;AAPe;AAQlB;;;;4CAEmB;AAAA;;AAChBE,4BAAMC,GAAN,CAAaC,qBAAb,2BACCC,IADD,CACM,UAACC,QAAD,EAAc;AAChB,oBAAIA,SAASC,MAAT,KAAoB,GAApB,IAA2BD,SAASC,MAAT,KAAoB,GAAnD,EAAwD;AACpD,2BAAKC,QAAL,CAAc,EAACC,mBAAmBH,SAASI,IAAT,CAAcC,SAAlC,EAA6Cd,UAAUS,SAASI,IAAT,CAAcC,SAArE,EAAgFb,OAAOQ,SAASI,IAAT,CAAcZ,KAArG,EAAd;AACH;AACJ,aALD,EAMCc,KAND,CAMO,UAACC,KAAD,EAAW;AACdC,wBAAQC,GAAR,CAAYF,KAAZ;AACA,uBAAKL,QAAL,CAAc,EAACQ,SAAS,KAAV,EAAd;AACH,aATD;AAUH;;;oDAE2B;AAAA;;AACxB,gBAAMN,oBAAY,KAAKd,KAAjB,CAAN;AACA,gBAAI,KAAKA,KAAL,CAAWa,iBAAX,KAAiC,KAAKb,KAAL,CAAWC,QAAhD,EAA0D;AACtD,uBAAOa,KAAKb,QAAZ;AACH;AACDK,4BAAMe,IAAN,CAAcb,qBAAd,iCAAsDM,IAAtD,EACCL,IADD,CACM,UAACC,QAAD,EAAc;AAChB,oBAAIA,SAASC,MAAT,KAAoB,GAApB,IAA2BD,SAASC,MAAT,KAAoB,GAAnD,EAAwD;AACpDO,4BAAQC,GAAR,CAAY,sBAAZ;AACA,2BAAKpB,KAAL,CAAWuB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EAA6B,EAAEC,SAASd,SAASI,IAAT,CAAcU,OAAzB,EAA7B;AACH;AACJ,aAND,EAOCR,KAPD,CAOO,UAACC,KAAD,EAAW;AACdC,wBAAQC,GAAR,CAAYF,KAAZ;AACA,uBAAKL,QAAL,CAAc,EAAEa,cAAcR,MAAMP,QAAN,CAAeI,IAAf,CAAoBG,KAApB,CAA0BS,OAA1B,CAAkC,sBAAlC,EAAyD,EAAzD,CAAhB,EAAd;AACH,aAVD;AAWH;;;qCAEYC,C,EAAG;AACZ,iBAAKf,QAAL,qBAAgBe,EAAEC,MAAF,CAASC,IAAzB,EAAgCF,EAAEC,MAAF,CAASE,KAAzC;AACH;;;iCAEQ;AACL,mBACI;AAAA;AAAA;AACI;AAAA;AAAA;AAAA;AAAA,iBADJ;AAEI;AAAA;AAAA;AAAA;AAAA,iBAFJ;AAGI,yDAAO,UAAU,KAAK3B,YAAtB,EAAoC,MAAK,MAAzC,EAAgD,MAAK,UAArD,EAAgE,OAAO,KAAKH,KAAL,CAAWC,QAAlF,GAHJ;AAII;AAAA;AAAA;AAAA;AAAA,iBAJJ;AAKI,yDAAO,UAAU,KAAKE,YAAtB,EAAoC,MAAK,MAAzC,EAAgD,MAAK,OAArD,EAA6D,OAAO,KAAKH,KAAL,CAAWE,KAA/E,GALJ;AAMI;AAAA;AAAA,sBAAQ,MAAK,QAAb,EAAsB,SAAS,KAAKG,yBAApC;AAAA;AAAA;AANJ,aADJ;AAUH;;;;EAzDwC0B,gBAAMC,S;;kBAA9BlC,e","file":"EditProfilePage.js","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport Navbar from './Navbar';\r\nimport {DOMAIN_URL} from '../utils/Constants';\r\n\r\nexport default class EditProfilePage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            email: '',\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleUpdateButtonClicked = this.handleUpdateButtonClicked.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(`${DOMAIN_URL}/api/v1/user/session`)\r\n        .then((response) => {\r\n            if (response.status === 200 || response.status === 304) {\r\n                this.setState({retrievedUsername: response.data.user_name, username: response.data.user_name, email: response.data.email});\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n            this.setState({loading: false});\r\n        });\r\n    }\r\n\r\n    handleUpdateButtonClicked() {\r\n        const data = { ...this.state };\r\n        if (this.state.retrievedUsername === this.state.username) {\r\n            delete data.username;\r\n        }\r\n        axios.post(`${DOMAIN_URL}/api/v1/user/updateProfile`, data)\r\n        .then((response) => {\r\n            if (response.status === 200 || response.status === 201) {\r\n                console.log('Successfully edited.');\r\n                this.props.history.push('/', { message: response.data.message });\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n            this.setState({ errorMessage: error.response.data.error.replace(/notNull Violation: /g,\"\")});\r\n        });\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({[e.target.name]: e.target.value});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>Edit profile</h1>\r\n                <h4>Username:</h4>\r\n                <input onChange={this.handleChange} type=\"text\" name=\"username\" value={this.state.username}/>\r\n                <h4>Email:</h4>\r\n                <input onChange={this.handleChange} type=\"text\" name=\"email\" value={this.state.email}/>\r\n                <button type=\"button\" onClick={this.handleUpdateButtonClicked}>Update</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]}