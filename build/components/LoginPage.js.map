{"version":3,"sources":["components/LoginPage.js"],"names":["LoginPage","props","state","username","password","errorMessage","handleChange","bind","handleLoginButtonClicked","handleNewUserClicked","console","log","DOMAIN_URL","axios","get","then","response","status","history","push","catch","error","e","setState","target","name","value","post","data","message","length","location","React","Component"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEqBA,S;;;AACpB,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA,oHACZA,KADY;;AAElB,QAAKC,KAAL,GAAa;AACTC,aAAU,EADD;AAETC,aAAU,EAFD;AAGTC,iBAAc;AAHL,GAAb;AAKA,QAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,OAApB;AACA,QAAKC,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BD,IAA9B,OAAhC;AACA,QAAKE,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BF,IAA1B,OAA5B;AATkB;AAUlB;;;;sCAEmB;AAAA;;AACbG,WAAQC,GAAR,CAAY,yBAAyBC,qBAArC;AACNC,mBAAMC,GAAN,CAAaF,qBAAb,2BACOG,IADP,CACY,UAACC,QAAD,EAAc;AAChB,QAAIA,SAASC,MAAT,KAAoB,GAAxB,EAA6B;AAC5B,YAAKhB,KAAL,CAAWiB,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACA;AACJ,IALP,EAMOC,KANP,CAMa,UAACC,KAAD,EAAW;AACvBX,YAAQC,GAAR,CAAYU,KAAZ;AACA,IARD;AASA;;;+BAEYC,C,EAAG;AACf,QAAKC,QAAL,qBAAgBD,EAAEE,MAAF,CAASC,IAAzB,EAAgCH,EAAEE,MAAF,CAASE,KAAzC;AACA;;;6CAE0B;AAAA;;AAC1Bb,mBAAMc,IAAN,CAAcf,qBAAd,yBAA8C;AAC7CT,cAAU,KAAKD,KAAL,CAAWC,QADwB;AAE7CC,cAAU,KAAKF,KAAL,CAAWE;AAFwB,IAA9C,EAICW,IAJD,CAIM,UAACC,QAAD,EAAc;AACnBN,YAAQC,GAAR,CAAYK,QAAZ;AACA,WAAKO,QAAL,CAAc,EAACpB,UAAU,EAAX,EAAeC,UAAU,EAAzB,EAAd;AACS,WAAKH,KAAL,CAAWiB,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACT,IARD,EASCC,KATD,CASO,UAACC,KAAD,EAAW;AACjBX,YAAQC,GAAR,CAAYU,KAAZ;AACA,WAAKE,QAAL,CAAc,EAAElB,cAAcgB,MAAML,QAAN,CAAeY,IAAf,CAAoBC,OAApC,EAAd;AACA,IAZD;AAaA;;;yCAEsB;AACtB,QAAKN,QAAL,CAAc,EAACpB,UAAU,EAAX,EAAeC,UAAU,EAAzB,EAAd;AACM,QAAKH,KAAL,CAAWiB,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB;AACH;;;2BAEO;AACR,OAAId,eAAe,EAAnB;;AAEA,OAAI,KAAKH,KAAL,CAAWG,YAAX,CAAwByB,MAAxB,GAAiC,CAArC,EAAwC;AACvCzB,mBAAe;AAAA;AAAA;AAAI,UAAKH,KAAL,CAAWG;AAAf,KAAf;AACA,IAFD,MAEO,IAAI,CAAC,CAAC,KAAKJ,KAAL,CAAW8B,QAAX,CAAoB7B,KAA1B,EAAiC;AACvCG,mBAAe;AAAA;AAAA;AAAI,UAAKJ,KAAL,CAAW8B,QAAX,CAAoB7B,KAApB,CAA0B2B;AAA9B,KAAf;AACF;;AAEE,UACI;AAAA;AAAA;AACExB,gBADF;AAEL;AAAA;AAAA;AAAA;AAAA,KAFK;AAGO,6CAAO,UAAU,KAAKC,YAAtB,EAAoC,MAAK,MAAzC,EAAgD,MAAK,UAArD,GAHP;AAIL;AAAA;AAAA;AAAA;AAAA,KAJK;AAKO,6CAAO,UAAU,KAAKA,YAAtB,EAAoC,MAAK,UAAzC,EAAoD,MAAK,UAAzD,GALP;AAML;AAAA;AAAA,OAAQ,MAAK,QAAb,EAAsB,SAAS,KAAKE,wBAApC;AAAA;AAAA,KANK;AAOL;AAAA;AAAA,OAAQ,MAAK,QAAb,EAAsB,SAAS,KAAKC,oBAApC;AAAA;AAAA;AAPK,IADJ;AAWD;;;;EAvEmCuB,gBAAMC,S;;AA0E7C;AACA;AACA;AACA;;;kBA7EqBjC,S","file":"LoginPage.js","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {DOMAIN_URL} from '../utils/Constants';\n\nexport default class LoginPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t    username: '',\n\t\t    password: '',\n\t\t    errorMessage: '',\n\t\t};\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.handleLoginButtonClicked = this.handleLoginButtonClicked.bind(this);\n\t\tthis.handleNewUserClicked = this.handleNewUserClicked.bind(this);\n\t}\n\n\tcomponentDidMount() {\n        console.log(\"Login - Base url is \" + DOMAIN_URL);\n\t\taxios.get(`${DOMAIN_URL}/api/v1/user/session`)\n        .then((response) => {\n            if (response.status === 200) {\n            \tthis.props.history.push('/home');\n            }\n        })\n        .catch((error) => {\n\t\t\tconsole.log(error);\n\t\t});\n\t}\n\n\thandleChange(e) {\n\t\tthis.setState({[e.target.name]: e.target.value});\n\t}\n\n\thandleLoginButtonClicked() {\n\t\taxios.post(`${DOMAIN_URL}/api/v1/user/login`, {\n\t\t\tusername: this.state.username,\n\t\t\tpassword: this.state.password,\n\t\t})\n\t\t.then((response) => {\n\t\t\tconsole.log(response);\n\t\t\tthis.setState({username: '', password: ''});\n            this.props.history.push('/home');\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.log(error);\n\t\t\tthis.setState({ errorMessage: error.response.data.message });\n\t\t});\n\t}\n\n\thandleNewUserClicked() {\n\t\tthis.setState({username: '', password: ''});\n        this.props.history.push('/signup');\n    }\n\n  \trender() {\n  \t\tlet errorMessage = '';\n\n  \t\tif (this.state.errorMessage.length > 0) {\n  \t\t\terrorMessage = <p>{this.state.errorMessage}</p>;\n  \t\t} else if (!!this.props.location.state) {\n  \t\t\terrorMessage = <p>{this.props.location.state.message}</p>;\n\t\t}\n\n\t    return (\n\t        <div>\n\t        \t{errorMessage}\n\t\t\t\t<h4>Username:</h4>\n                <input onChange={this.handleChange} type=\"text\" name=\"username\" />\n\t\t\t\t<h4>Password:</h4>\n                <input onChange={this.handleChange} type=\"password\" name=\"password\" />\n\t\t\t\t<button type=\"button\" onClick={this.handleLoginButtonClicked}>Login</button>\n\t\t\t\t<button type=\"button\" onClick={this.handleNewUserClicked}>New User</button>\n\t\t\t</div>\n\t    );\n  \t}\n}\n\n// LESSONS LEARNED\n// 1. Make sure bind all on(*) handles\n// 2. on(*) handles come with event e, retrieve UI element with e.target\n// 3. Doublecheck HTTP verb for each route used (GET? POST? PUT? PATCH? DELETE?)\n"]}